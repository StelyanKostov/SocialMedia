@using Microsoft.AspNetCore.Identity
@using SocialMedia.Data
@model List<SocialMedia.ViewModels.Image.ImageViewModel>
@inject SignInManager<ApplicationUser> SignInManager



<div class="mx-auto" style="width: 360px;">


    @if (SignInManager.IsSignedIn(this.User))
    {
        <input type="hidden" class="user-id" value="@SignInManager.UserManager.GetUserId(this.User)" />
    }
    @foreach (var item in Model.OrderByDescending(x => x.CreatedOn).ToList())
    {



        @*<div class="col-sm-4 border">

                <a asp-controller="Profil" asp-action="OpenProfil" asp-route-id="@item.Profil.id">
                    <h3>@item.Profil.UserName</h3>
                    <div class="text-center">
                        <img src="~/images/ProfilImage/@item.Profil.UserName/@item.Id.@item.Extension" alt="Alternate Text" width="100%" class="rounded" />
                    </div>

                </a>
            </div>*@
        <div class="card" style="width: 30rem;  margin-top: 20px !important">
            <a asp-controller="Profil" asp-action="OpenProfil" asp-route-id="@item.Profil.id">

                <div class="card-body">
                    <h4 class="card-title">@item.Profil.UserName</h4>

                    <p class="card-text">@item.Description</p>
                </div>

                @*<h5 class="font-italic">@item.Profil.UserName</h5>*@
                <img class="card-img-top" src="~/images/ProfilImage/@item.Profil.UserName/@item.Id.@item.Extension" alt="Card image cap">
                <input type="hidden" class="img-id" value="@item.Id" />


            </a>


            @*<i class="far fa-thumbs-up"></i>*@
            @if (SignInManager.IsSignedIn(User))
            {
                <nav>
                    <button class="btn btn-primary btn-lg button-like" type="button"><i class="fas fa-thumbs-up" style="font-size:25px"> @item.Likes.Count()</i></button>

                    <button class="btn btn-primary btn-lg button-comments" type="button">  <i class="fas fa-comments" style="font-size:25px"> @item.Comments.Count()</i></button>

                    @if (User.IsInRole("Admin"))
                    {
                        <a class="btn btn-danger btn-lg" asp-area="Administration" asp-controller="Admin" asp-action="DeleteImg" asp-route-imgId="@item.Id">   <i class="far fa-trash-alt"></i></a>
                    }
                </nav>

                @*<button type="submit" class="button-comments bnt btn-primary">Comments</button>*@

            }

        </div>


        <div style=" margin-top: 10 !important;">

        </div>
    }


</div>

<script src="~/scripts/Home/comments.js"></script>
<script src="~/scripts/Home/likes.js"></script>